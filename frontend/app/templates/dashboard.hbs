<div class="row">
    <h1 class="primary-text">Dashboard</h1>
    <div class="col s6">
        <div class="card">
            <div class="card-content" data-rules>
                <span class="card-title primary-text">Rules</span>
                <p>Check your already configured rules.</p>
            </div>
            <div class="card-action">
                <a href="/dashboard/rules" class="primary-text">Configure</a>
            </div>
        </div>
    </div>
     <div class="col s6">
        <div class="card" data-harvested>
            <div class="card-content">
                <span class="card-title primary-text">Harvested Clicks</span>
                <p>Check unconfigured harvested clicks.</p>
            </div>
            <div class="card-action">
                <a href="/dashboard/harvested" class="primary-text">Configure</a>
            </div>
        </div>
    </div>
    <div class="col s12">
        <div class="card">
            <div class="card-content">
                <span class="card-title primary-text">Configuration and Setup</span>
                {{#if tid}}
                <div class="section">
                        <div class="input-field">
                            <input id="google-id" type="text" class="validate" value="{{tid}}">
                            <label for="google-id">UA TID</label>
                        </div>
                        <button id="update-tid" class="btn waves-effect waves-light" type="submit" name="action">
                            Save
                        </button>
                </div>
                <div class="divider"></div>
                <div class="section">
                    <b>Snippet</b>
                    <p>Include the following snippet in your webpage:</p>
                    <input id="snippet" type="text" value='<script src="http://169.45.108.53:8000/{{id}}/snippet.min.js"></script>' disabled>
                    <p></p>
                </div>
                <div class="section">
                    <b>Rules Bookmarklet</b>
                    <p>Drag and drop the following link to your bookmarks tab. You may then click the bookmark while on your site to select links to feed to No Fuss Analytics. Go back to No Fuss Analytics and create the rule for the Harvested Click.</p>
                    <br>
                    <a href='javascript:!function(){"use strict";function t(){}function e(t,n){var o,r,a,i=[];for(o in t)t.hasOwnProperty(o)&&(r=n?n+"["+o+"]":o,a=t[o],i.push("object"==typeof a?e(a,r):encodeURIComponent(r)+"="+encodeURIComponent(a)));return i.join("&")}function n(t,n){var o=e(n);return""===o?t:t+"?"+o}function o(e){var o=e.method,r=e.url,a=e.params,i=e.body,s=e.success||t,c=e.fail||t,l=new XMLHttpRequest;l.open(o,n(r,a),!0),l.onreadystatechange=function(){if(4===this.readyState){var t=JSON.parse(this.responseText);this.status>=200&&this.status<400?s(t):c(t)}},l.setRequestHeader("Content-Type","application/json"),l.send(i?JSON.stringify(i):void 0),l=null}function r(t,e,n){var o,r;null===n?o="":(r=new Date,r.setTime(r.getTime()+60*n*1e3),o="expires="+r.toUTCString()),document.cookie=t+"="+e+"; "+o+"; path=/"}function a(t){var e,n,o=t+"=",r=document.cookie.split("; ");for(n=r.length-1;n>=0;n--)if(e=r[n],0===e.indexOf(o))return e.substring(o.length,e.length);return!1}function i(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function s(){return i()+i()+"-"+i()+"-"+i()+"-"+i()+"-"+i()+i()+i()}function c(t){for(var e,n=t.length,o={};n--;)e=t[n],o[e.name]=e.value;return o}function l(t,e){u(),console.log({url:"http://169.45.108.53:8000/click",method:"POST",body:{cid:e,nfa_id:p,url:location.href,bookmarklet:!0,payload:{target:t.outerHTML,attrs:c(t.attributes)}}}),o({url:"http://169.45.108.53:8000/click",method:"POST",body:{cid:e,nfa_id:p,url:location.href,bookmarklet:!0,payload:{target:t.outerHTML,attrs:c(t.attributes)}}}),alert("Element tracked, please visit No Fuss Analytics")}function u(){var t=document.getElementById("no__fuss__tracker");t.parentNode.removeChild(t),t.no__fuss__target&&(t.no__fuss__target.style.backgroundColor=t.no__fuss__target.oldBg)}function d(){return function(t){var e=t.target;!e.onclick&&"A"!=e.nodeName||"no__fuss__tracker"==e.id||(e.oldBg=e.style.backgroundColor,e.style.backgroundColor="#EEDD00",f(e),e.onmouseleave=function(t){u(t)})}}function f(t){if(!document.getElementById("no__fuss__tracker")){var e=document.createElement("div");e.id="no__fuss__tracker",e.style.fontFamily="Arial",e.style.fontSize="8pt",e.style.fontWeight="100",e.style.textAlign="center",e.style.width="150px",e.style.backgroundColor="#004d40",e.style.color="#eee",e.style.padding="2px",e.style.cursor="pointer",e.no__fuss__target=t;var n=document.createElement("div");n.appendChild(document.createTextNode("Track clicks on this element"));var o=document.createElement("div");o.appendChild(document.createTextNode("via No Fuss Analytics")),e.appendChild(n),e.appendChild(o),e.onclick=function(e){var n=a("nfa")||s();l(t,n),e.preventDefault()},t.appendChild(e)}}var p;window.NFA={init:function(t){var e=a("nfa")||s();r("nfa",e),p=t,document.onmouseover=d()}}}(),window.NFA.init("{{id}}");' class="btn waves-effect waves-light primary">Choose Links</a>
                    <p></p>
                </div>
                <div class="section">
                    <b>Bookmarklet Inject</b>
                    <p>Drag and drop the following link to your bookmarks tab. You may then click the bookmark while on any site to have clicks sent to your No Fuss Analytics account.</p>
                    <br>
                    <a href='javascript:var jsElm=document.createElement("script");jsElm.type="application/javascript",jsElm.src="http://169.45.108.53:8000/{{id}}/snippet.min.js",document.body.appendChild(jsElm);' class="btn waves-effect waves-light primary">Load No Fuss Analytics</a>
                    <p></p>
                </div>
                {{else}}
                    <div class="progress">
                      <div class="indeterminate"></div>
                    </div>
                {{/if}}
            </div>
        </div>
    </div>
</div>
